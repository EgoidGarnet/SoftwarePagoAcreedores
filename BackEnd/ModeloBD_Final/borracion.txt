USE pagoAcreedores;

SET FOREIGN_KEY_CHECKS = 0;

TRUNCATE TABLE PA_REPORTE_PROPUESTAS_DE_PAGO;
TRUNCATE TABLE PA_REPORTES_FACTURAS_PENDIENTES;
TRUNCATE TABLE PA_TIPOS_DE_CAMBIO;
TRUNCATE TABLE PA_DETALLES_FACTURA;
TRUNCATE TABLE PA_DETALLES_PROPUESTA;
TRUNCATE TABLE PA_PROPUESTAS_DE_PAGO;
TRUNCATE TABLE PA_FACTURAS;
TRUNCATE TABLE PA_CUENTAS_PROPIAS;
TRUNCATE TABLE PA_CUENTAS_ACREEDOR;
TRUNCATE TABLE PA_MONEDAS;
TRUNCATE TABLE PA_ENTIDADES_BANCARIAS;
TRUNCATE TABLE PA_ACREEDORES;
TRUNCATE TABLE PA_USUARIO_PAIS_ACCESO;
TRUNCATE TABLE PA_PAISES;
TRUNCATE TABLE PA_USUARIOS;

SET FOREIGN_KEY_CHECKS = 1;



SQL SERVER:

USE softpacbd;
GO

SET NOCOUNT ON;
GO

PRINT 'Starting data cleanup process...';
PRINT '';

-- Disable all foreign key constraints
PRINT 'Disabling foreign key constraints...';
EXEC sp_MSforeachtable 'ALTER TABLE ? NOCHECK CONSTRAINT ALL';
GO

-- Delete data in reverse order of dependencies
PRINT 'Deleting PA_DETALLES_FACTURA...';
DELETE FROM [dbo].[PA_DETALLES_FACTURA];

PRINT 'Deleting PA_DETALLES_PROPUESTA...';
DELETE FROM [dbo].[PA_DETALLES_PROPUESTA];

PRINT 'Deleting PA_PROPUESTAS_DE_PAGO...';
DELETE FROM [dbo].[PA_PROPUESTAS_DE_PAGO];

PRINT 'Deleting PA_FACTURAS...';
DELETE FROM [dbo].[PA_FACTURAS];

PRINT 'Deleting PA_CUENTAS_ACREEDOR...';
DELETE FROM [dbo].[PA_CUENTAS_ACREEDOR];

PRINT 'Deleting PA_CUENTAS_PROPIAS...';
DELETE FROM [dbo].[PA_CUENTAS_PROPIAS];

PRINT 'Deleting PA_ACREEDORES...';
DELETE FROM [dbo].[PA_ACREEDORES];

PRINT 'Deleting PA_ENTIDADES_BANCARIAS...';
DELETE FROM [dbo].[PA_ENTIDADES_BANCARIAS];

PRINT 'Deleting PA_TIPOS_DE_CAMBIO...';
DELETE FROM [dbo].[PA_TIPOS_DE_CAMBIO];

PRINT 'Deleting PA_MONEDAS...';
DELETE FROM [dbo].[PA_MONEDAS];

PRINT 'Deleting PA_USUARIO_PAIS_ACCESO...';
DELETE FROM [dbo].[PA_USUARIO_PAIS_ACCESO];

PRINT 'Deleting PA_USUARIOS...';
DELETE FROM [dbo].[PA_USUARIOS];

PRINT 'Deleting PA_PAISES...';
DELETE FROM [dbo].[PA_PAISES];

PRINT 'Deleting PA_REPORTES_FACTURAS_PENDIENTES...';
DELETE FROM [dbo].[PA_REPORTES_FACTURAS_PENDIENTES];

GO

-- Reset identity columns
PRINT '';
PRINT 'Resetting identity columns...';

DBCC CHECKIDENT ('PA_PAISES', RESEED, 0);
DBCC CHECKIDENT ('PA_MONEDAS', RESEED, 0);
DBCC CHECKIDENT ('PA_ENTIDADES_BANCARIAS', RESEED, 0);
DBCC CHECKIDENT ('PA_ACREEDORES', RESEED, 0);
DBCC CHECKIDENT ('PA_CUENTAS_ACREEDOR', RESEED, 0);
DBCC CHECKIDENT ('PA_CUENTAS_PROPIAS', RESEED, 0);
DBCC CHECKIDENT ('PA_FACTURAS', RESEED, 0);
DBCC CHECKIDENT ('PA_DETALLES_FACTURA', RESEED, 0);
DBCC CHECKIDENT ('PA_PROPUESTAS_DE_PAGO', RESEED, 0);
DBCC CHECKIDENT ('PA_DETALLES_PROPUESTA', RESEED, 0);
DBCC CHECKIDENT ('PA_TIPOS_DE_CAMBIO', RESEED, 0);

GO

-- Re-enable all foreign key constraints
PRINT '';
PRINT 'Re-enabling foreign key constraints...';
EXEC sp_MSforeachtable 'ALTER TABLE ? WITH CHECK CHECK CONSTRAINT ALL';
GO

PRINT '';
PRINT '=============================================';
PRINT 'DATA CLEANUP COMPLETED SUCCESSFULLY';
PRINT '=============================================';
PRINT 'All data has been removed from all tables.';
PRINT 'Identity columns have been reset.';
PRINT 'Database structure remains intact.';
PRINT '=============================================';
GO